[
  {
    "trigger": "START",
    "response": {
      "attachment": {
        "type": "template",
        "payload": {
          "template_type": "generic",
          "elements": [
            {
              "title": "Bonjour, que puis-je faire pour vous aujourd'hui?",
              "image_url": "http://res.cloudinary.com/hanburger97/image/upload/v1484877846/71-v-Appartements_a_louer_a_Griffintown__Location_Hexagone_vpq0eh.jpg",
              "subtitle": "",
              "buttons": [
                {
                  "type": "postback",
                  "title": "Voir les services",
                  "payload": "SERVICES"
                },
                {
                  "type": "postback",
                  "title": "Comment ça marche?",
                  "payload": "HOW_IT_WORKS"
                },
                {
                  "type": "postback",
                  "title": "Appeler",
                  "payload": "CALL"
                }
              ]
            }
          ]
        }
      }
    },
    "action": {
      "operation": "RecordUser"
    }
  },
  {
    "trigger": "SERVICES",
    "response": {
      "attachment": {
        "type": "template",
        "payload": {
          "template_type": "generic",
          "elements": [
            {
              "title": "Lavage et Entretien",
              "subtitle": "Cliquez sur le service dont vous avez besoin ou écrivez-le.",
              "image_url": "http://res.cloudinary.com/hanburger97/image/upload/v1484878006/1c05f122c9836d73625af694c7836ed5_iqgeeh.jpg",
              "buttons": [
                {
                  "type": "postback",
                  "title": "Lave-Auto",
                  "payload": "SERVICE_LAVE_AUTO"
                },
                {
                  "type": "postback",
                  "title": "Entretien Ménager",
                  "payload": "SERVICE_ENTRETIEN"
                },
                {
                  "type": "postback",
                  "title": "Nettoyeur",
                  "payload": "CLEANER"
                }
              ]
            },
            {
              "title": "Gourmand",
              "subtitle": "Les meilleurs produits et fournisseurs.",
              "image_url": "http://res.cloudinary.com/hanburger97/image/upload/v1484878900/41640817-variety-of-organic-vegetables-and-fruits-in-wicker-basket-isolated-on-white_mzqfjh.jpg",
              "buttons": [
                {
                  "type": "postback",
                  "title": "Alimentation Maison",
                  "payload": "//SHOW_PRODUCTS/{\"vendor\":\"Alimentation maison\"}"
                },
                {
                  "type": "postback",
                  "title": "Bières et vins",
                  "payload": "//SHOW_PRODUCTS/{\"product_type\":\"beer\"}"
                },
                {
                  "type": "postback",
                  "title": "Alexis le Gourmand",
                  "payload": "//SHOW_PRODUCTS/{\"vendor\":\"Alexis le gourmand\"}"
                }
              ]
            },
            {
              "title": "Travaux manuels: Peu importe la tâche, j'ai le meilleur pour le faire",
              "subtitle": "Nos hommes à tout faire, très compétents, chargent environ 25$/heure",
              "image_url": "http://res.cloudinary.com/hanburger97/image/upload/v1484878803/IMG-Handyman-Skills_f2tjmp.jpg",
              "buttons": [
                {
                  "type": "postback",
                  "title": "Remplir une Demande",
                  "payload": "M_REQUEST"
                },
                {
                  "type":"phone_number",
                  "title":"Appeler",
                  "payload":"+15143484966"
                }
              ]
            },
            {
              "title": "Soins et esthétique",
              "subtitle": "Les meilleurs esthéticiens pour votre style dans le confort de votre condo. Essayez!",
              "image_url": "http://res.cloudinary.com/hanburger97/image/upload/v1484878736/MASSAGE_3_mrt8qo.jpg",
              "buttons": [
                {
                  "type": "postback",
                  "title": "Massothérapie",
                  "payload": "S_MASSAGE"
                },
                {
                  "type": "postback",
                  "title": "Pedicure, Manicure",
                  "payload": "S_PEDICURE"
                }
              ]
            }
          ]
        }
      }
    },
    "action": {}
  },
  {
    "trigger": "SERVICE_LAVE_AUTO",
    "response": {
      "text": "Quand désirez-vous faire laver votre auto? Choississez parmi les 3 prochaines soirées proposées, entre 18h30 et 20h30, même si c'est aujourd'hui!",
      "quick_replies": [
        {
          "content_type": "text",
          "title": "Lundi",
          "payload": "CARWASH_MONDAY"
        },
        {
          "content_type": "text",
          "title": "Mercredi",
          "payload": "CARWASH_WEDNESDAY"
        },
        {
          "content_type": "text",
          "title": "Vendredi",
          "payload": "CARWASH_FRIDAY"
        },
        {
          "content_type": "text",
          "title": "Annuler un lavage",
          "payload": "CARWASH_CANCEL"
        },
        {
          "content_type": "text",
          "title": "Plus d'info",
          "payload": "CARWASH_INFO"
        }
      ]
    },
    "action": {}
  },
  {
    "trigger": "LAVE_AUTO_INFO",
    "response": {
      "attachment": {
        "type": "template",
        "payload": {
          "template_type": "button",
          "text": "Si vous n'êtes pas abonné à un forfait,  le lavage extérieur coûte 22$, le lavage complet coûte 29$.  Les forfaits permettent d'importantes économies, en plus  de vous offrir un service sur mesure, selon vos propres critères de fréquence et de lavage.",
          "buttons": [
            {
              "type": "postback",
              "title": "Voir les Forfaits",
              "payload": "LAVE_AUTO_FORFAITS"
            },
            {
              "type": "postback",
              "title": "Comment ca marche?",
              "payload": "LAVE_AUTO_HOW"
            },
            {
              "type": "postback",
              "title": "Retour au Menu",
              "payload": "start"
            }
          ]
        }
      }
    }
  },
  {
    "trigger":"EMAIL",
    "response":{
      "text":"Veuillez entrer votre addresse courriel"
    },
    "action":{
      "operation":"RecordEmail"
    }

  },
  {
    "trigger": "CHECKOUT",
    "response": {},
    "action": {
      "operation": "CheckOut"
    }
  },
  {
    "trigger": "SERVICE_ENTRETIEN",
    "response": {
      "text": "Veuillez entrer votre numéro d'appartement:"
    },
    "action": {
      "operation": "RecordRoom"
    }
  },
  {
    "trigger": "CHANGE_ROOM",
    "response": {
      "text": "Veuillez entrer votre nouveau numéro de chambre:"
    },
    "action": {
      "operation": "ChangeRoom"
    }
  },
  {
    "trigger": "ENTRETIEN_PROCEED",
    "response": {},
    "action": {
      "operation": "AddRoomToCart"
    }
  },
  {
    "trigger": "CARWASH_MONDAY",
    "response": {
      "text": "Voulez-vous un lavage seulement extérieur ou complet?",
      "quick_replies": [
        {
          "content_type": "text",
          "title": "Extérieur 20$",
          "payload": "CARWASH_EXTERIOR"
        },
        {
          "content_type": "text",
          "title": "Complet 25$",
          "payload": "CARWASH_COMPLETE"
        },
        {
          "content_type": "text",
          "title": "Plus d'info",
          "payload": "CARWASH_INFO"
        },
        {
          "content_type": "text",
          "title": "Annuler",
          "payload": "CARWASH_CANCEL"
        }
      ]
    },
    "action": {
      "value": "Lundi",
      "operation": "RecordDay"
    }
  },
  {
    "trigger": "CARWASH_WEDNESDAY",
    "response": {
      "text": "Voulez-vous un lavage seulement extérieur ou complet? ",
      "quick_replies": [
        {
          "content_type": "text",
          "title": "Extérieur 20$",
          "payload": "CARWASH_EXTERIOR"
        },
        {
          "content_type": "text",
          "title": "Complet 25$",
          "payload": "CARWASH_COMPLETE"
        },
        {
          "content_type": "text",
          "title": "Plus d'info",
          "payload": "CARWASH_INFO"
        },
        {
          "content_type": "text",
          "title": "Annuler",
          "payload": "CARWASH_CANCEL"
        }
      ]
    },
    "action": {
      "value": "Mercredi",
      "operation": "RecordDay"
    }
  },
  {
    "trigger": "CARWASH_FRIDAY",
    "response": {
      "text": "Voulez-vous un lavage seulement extérieur ou complet? ",
      "quick_replies": [
        {
          "content_type": "text",
          "title": "Extérieur 20$",
          "payload": "CARWASH_EXTERIOR"
        },
        {
          "content_type": "text",
          "title": "Complet 25$",
          "payload": "CARWASH_COMPLETE"
        },
        {
          "content_type": "text",
          "title": "Plus d'info",
          "payload": "CARWASH_INFO"
        },
        {
          "content_type": "text",
          "title": "Annuler",
          "payload": "CARWASH_CANCEL"
        }
      ]
    },
    "action": {
      "value": "Vendredi",
      "operation": "RecordDay"
    }
  },
  {
    "trigger": "CARWASH_EXTERIOR",
    "response": {
      "attachment": {
        "type": "template",
        "payload": {
          "template_type": "button",
          "text": "Parfait!",
          "buttons": [
            {
              "type": "postback",
              "title": "Continuer",
              "payload": "CARWASH_EXTERIOR_NXT"
            }
          ]
        }
      }
    },
    "action": {
      "value": "Votre voiture sera lavée le soir directement dans son espace de stationnement, vous recevrez un message lorsque nous aurons terminé. Veuillez vous assurer qu'elle soit bien centrée dans son espace. Au plaisir de vous servir!",
      "operation": "AddDetail"
    }
  },
  {
    "trigger": "CARWASH_EXTERIOR_NXT",
    "response": {},
    "action": {
      "operation": "RecordParking"
    }
  },
  {
    "trigger": "CARWASH_COMPLETE",
    "response": {
      "attachment": {
        "type": "template",
        "payload": {
          "template_type": "button",
          "text": "Parfait!",
          "buttons": [
            {
              "type": "postback",
              "title": "Continuer",
              "payload": "CARWASH_EXTERIOR_NXT"
            }
          ]
        }
      }
    },
    "action": {
      "value": "Je serai à votre porte entre 18h30 et 19h30 afin récupérer votre clef de voiture. Au plaisir de vous servir!",
      "operation": "AddDetail"
    }
  },
  {
    "trigger": "CHANGE_PARKING",
    "response": {
      "text": "Veuillez entrer votre numéro de stationement:"
    },
    "action": {
      "operation": "ChangeParking"
    }
  },
  {
    "trigger": "CARWASH_PROCEED",
    "response": {},
    "action": {
      "operation": "CarWashConfirm"
    }
  },
  {
    "trigger": "CARWASH_INTERIOR_NXT",
    "response": {},
    "action": {
      "operation": "RecordParking"
    }
  },
  {
    "trigger": "CARWASH_CANCEL",
    "response": {
      "text": "Votre commande de lave-auto a belle et bien été annulée. Au plaisir de vous servir."
    }
  },
  {
    "trigger": "CARWASH_INFO",
    "response": {
      "attachment": {
        "type": "template",
        "payload": {
          "template_type": "button",
          "text": "Notre méthode innovante et éco-responsable garantit une peinture étincelante et un habitacle totalement désinfecté et sans contaminants. La voiture est lavée dans son espace de stationnement (20$), nous venons chercher vos clefs si vous voulez que nous lavions aussi l'intérieur (26$).",
          "buttons": [
            {
              "type": "postback",
              "title": "Méthode de lavage",
              "payload": "CARWASH_METHOD"
            },
            {
              "type": "postback",
              "title": "Retour Lave-Auto",
              "payload": "SERVICE_LAVE_AUTO"
            },
            {
              "type": "postback",
              "title": "Retour Menu Principale",
              "payload": "SERVICES"
            }
          ]
        }
      }
    },
    "action": {}
  },
  {
    "trigger": "CARWASH_METHOD",
    "response": {
      "attachment": {
        "type": "template",
        "payload": {
          "template_type": "button",
          "text": "Méthode de plus en plus répandue, la vapeur sèche permet de ne consommer qu'entre 5 et 10 litres d'eau par lavage, contre plus de 300 litres pour un lavage traditionnel! De plus, cette technologie nous permet de réduire au minimum les produits chimiques et contaminants, en particulier dans l'habitacle.",
          "buttons": [
            {
              "type": "postback",
              "title": "Retour Lave-Auto",
              "payload": "SERVICE_LAVE_AUTO"
            },
            {
              "type": "postback",
              "title": "Retour Menu Principale",
              "payload": "SERVICES"
            }
          ]
        }
      }
    },
    "action": {}
  },
  {
    "trigger": "ENTRETIEN_FINISH",
    "response": {
      "text": "Merci, un humain viendrait vous confirmer la commande"
    }
  },
  {
    "trigger": "CLEANER",
    "response": {
      "text": "Quand aimeriez-vous que je vienne chercher vos vêtements? Nous passons tous les Lundis, Mercredis et Vendredis entre 18h30 et 20h30.",
      "quick_replies": [
        {
          "content_type": "text",
          "title": "Lundi",
          "payload": "CLEANER_MONDAY"
        },
        {
          "content_type": "text",
          "title": "Mercredi",
          "payload": "CLEANER_WEDNESDAY"
        },
        {
          "content_type": "text",
          "title": "Vendredi",
          "payload": "CLEANER_FRIDAY"
        }
      ]
    },
    "action": {}
  },
  {
    "trigger": "CLEANER_MONDAY",
    "response": {
      "attachment": {
        "type": "template",
        "payload": {
          "template_type": "button",
          "text": "À votre service, je serai à votre porte Lundi soir pour récupérer vos vêtements.",
          "buttons": [
            {
              "type": "postback",
              "title": "Confirmer",
              "payload": "CLEANER_PROCEED"
            },
            {
              "type": "postback",
              "title": "Annuler",
              "payload": "CLEANER_CANCEL"
            },
            {
              "type": "postback",
              "title": "Voir tarifs",
              "payload": "CLEANER_QUOTE"
            }
          ]
        }
      }
    },
    "action": {
      "value": "Lundi",
      "operation": "RecordDay"
    }
  },
  {
    "trigger": "CLEANER_WEDNESDAY",
    "response": {
      "attachment": {
        "type": "template",
        "payload": {
          "template_type": "button",
          "text": "À votre service, je serai à votre porte Mercredi soir pour récupérer vos vêtements.",
          "buttons": [
            {
              "type": "postback",
              "title": "Confirmer",
              "payload": "CLEANER_PROCEED"
            },
            {
              "type": "postback",
              "title": "Annuler",
              "payload": "CLEANER_CANCEL"
            },
            {
              "type": "postback",
              "title": "Voir Tarifs",
              "payload": "CLEANER_QUOTE"
            }
          ]
        }
      }
    },
    "action": {
      "value": "Mercredi",
      "operation": "RecordDay"
    }
  },
  {
    "trigger": "CLEANER_FRIDAY",
    "response": {
      "attachment": {
        "type": "template",
        "payload": {
          "template_type": "button",
          "text": "À votre service, je serai à votre porte Vendredi soir pour récupérer vos vêtements.",
          "buttons": [
            {
              "type": "postback",
              "title": "Confirmer",
              "payload": "CLEANER_PROCEED"
            },
            {
              "type": "postback",
              "title": "Annuler",
              "payload": "CLEANER_CANCEL"
            },
            {
              "type": "postback",
              "title": "Voir Tarifs",
              "payload": "CLEANER_QUOTE"
            }
          ]
        }
      }
    },
    "action": {
      "value": "Vendredi",
      "operation": "RecordDay"
    }
  },
  {
    "trigger": "CLEANER_PROCEED",
    "response": {
      "text": "Quand voulez-vous que nous rapportions vos vêtements?",
      "quick_replies": [
        {
          "content_type": "text",
          "title": "Lundi",
          "payload": "CLEANER_FINISH"
        },
        {
          "content_type": "text",
          "title": "Mercredi",
          "payload": "CLEANER_FINISH"
        },
        {
          "content_type": "text",
          "title": "Vendredi",
          "payload": "CLEANER_FINISH"
        }
      ]
    },
    "action": {}
  },
  {
    "trigger": "CLEANER_FINISH",
    "response": {
      "attachment": {
        "type": "template",
        "payload": {
          "template_type": "button",
          "text": "Parfait, au plaisir de vous servir.",
          "buttons": [
            {
              "type": "postback",
              "title": "Retour au menu",
              "payload": "START"
            },
            {
              "type": "postback",
              "title": "Annuler mon nettoyage",
              "payload": "CLEANER_CANCEL"
            }
          ]
        }
      }
    },
    "action": {}
  }

]